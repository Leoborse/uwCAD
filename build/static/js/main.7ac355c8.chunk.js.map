{"version":3,"sources":["cards/Utils.js","net/Network.js","net/CircuitElements.js","cards/Plot.js","cards/Info.js","cards/Parts.js","cards/Board.js","cards/Layout.js","cards/Smith.js","cards/Graph.js","App.js","index.js"],"names":["format","x","n","toLocaleString","undefined","minimumFractionDigits","maximumFractionDigits","Part","props","showModal","setState","show","hideModal","setData","event","preventDefault","newData","i","target","length","tagName","type","c","parseFloat","value","isNaN","name","onChangeData","fmt","db","Math","log10","deg","PI","state","focus","React","Component","Modal","handleOk","handleCancel","title","children","s","this","showHideClassName","className","onSubmit","onClick","scale","ghz","snet","names","np","data","plot","points","curve","j","input","push","net","l","JSON","parse","stringify","layout","nodes","p","countJunctions","nl","e","repl","m","replace","ports","getPorts","schema","f0","f1","compute","a","k","f","nn","forEach","item","parts","smatrix","board","en","pop","inm","max","includes","ei","ep","join","filter","connect","p0","indexOf","p1","h","see","SMatrix","sei","sie","sii","g","Complex","elements","es","el","pp","set","add","mul","sub","inverse","val","d","km","r","kn","s2","s1","s2s","n1","n2","Array","fill","constructor","idet","si","nr","nc","v","re","im","CircuitElement","w","list","Object","entries","Circuit","TLine","z","phi","zd","y","er","ereq","sqr","ge","sqrt","exp","em","den","t","defaultValue","lumped","vt","xl","xc","div","step","required","tline","junction","tee","cross","open","ground","Plot","color","conf","colors","fd","min","floor","fp","map","key","style","abs","arg","Info","info","Parts","modals","b","current","handleChange","bind","editParams","getData","console","log","evt","ce","checkData","htmlFor","id","onChange","render","toString","Board","u","ref","split","Layout","setCanvas","canvas","drawGraph","dimensions","getBoundingClientRect","width","height","ctx","getContext","mx","my","beginPath","font","strokeStyle","strokeRect","fillStyle","fillText","x0","fillRect","stroke","xr","yr","nodi","dim","size","ex","arc","tmp","textAlign","textBaseline","xri","yri","rect","lineWidth","moveTo","lineTo","Smith","zn","ri","rr","cx","cy","dpi","setLineDash","dj","px","py","Graph","dx","mdb","ceil","yrange","range","ygrid","off","vdb","fm","App","startup","localStorage","setItem","cache","fetch","then","response","json","values","shift","lay_out","o","j2","j3","j4","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.7ac355c8.chunk.js","sourcesContent":["import React from 'react'\n\nfunction format(x,n){\n  return x.toLocaleString(undefined,{ minimumFractionDigits: n, maximumFractionDigits: n })\n}\n\nexport default class Part extends React.Component{\n  constructor(props){\n    super(props)\n    this.state = { show: -1 }\n    this.focus = null\n    this.onChangeData = this.props.onChangeData\n  }\n  showModal = (n) => { this.setState({ show: n || 0 }) }\n  hideModal = () =>  { this.setState({ show: -1 }) }\n  setData = (event) => {\n    event.preventDefault()\n    var newData = {}\n    for ( var i=0; i<event.target.length; i++) {\n      if ( event.target[i].tagName !== \"BUTTON\" ) {\n        if ( event.target[i].type === 'number' ) {\n          var c = parseFloat(event.target[i].value)\n          if ( ! isNaN(c) )\n            newData[event.target[i].name] = c\n        } else {\n          newData[event.target[i].name] = event.target[i].value\n        }\n      }\n    }\n    this.onChangeData(newData)\n    this.hideModal()\n  }\n  fmt = (x,n) => { return format(x,n) }\n  db  = (x) => { return format(20.*Math.log10(x),2) }\n  deg = (x) => { return format(180.*x/Math.PI,1) }\n}\n\nclass Modal extends React.Component{\n  constructor(props){\n    super(props)\n    this.state = {\n      handleOk: this.props.handleOk,\n      handleCancel: this.props.handleCancel,\n      title: this.props.title,\n      children: this.props.children\n    }\n  }\n  render(){\n    const s = this.state\n    const showHideClassName = this.props.show ? \"w3-modal w3-show\" : \"w3-modal w3-hide\"\n    return (\n      <div className={showHideClassName}>\n        <div className=\"w3-modal-content w3-animate-zoom w3-blue w3-round-large\">\n          <form onSubmit={s.handleOk}>\n            <header className=\"w3-container w3-round-large\">\n              <span className=\"w3-xxlarge\">{s.title}</span>\n              <span className=\"w3-button w3-right w3-round w3-xxlarge\" onClick={this.state.handleCancel}>&times;</span>\n            </header>\n            <div className=\"w3-container\">\n              <div className=\"w3-margin\">{s.children}</div>\n            </div>\n            <footer className=\"w3-container w3-round-large\">\n              <button type=\"submit\" name=\"submit\" className=\"w3-button w3-right w3-margin w3-round w3-green\">Ok</button>\n              <button type=\"button\" name=\"cancel\" className=\"w3-button w3-right w3-margin w3-round w3-red\" onClick={this.state.handleCancel}>Cancel</button>\n            </footer>\n          </form>\n        </div>\n      </div>\n    )\n  }\n}\n\nconst scale = {\n  \"E\": 1e18,\n  \"P\": 1e15,\n  \"T\": 1e12,\n  \"G\": 1e9,\n  \"M\": 1e6,\n  \"K\": 1e3,\n  \"\" : 1,\n  \"m\": 1e-3,\n  \"µ\": 1e-6,\n  \"n\": 1e-9,\n  \"p\": 1e-12,\n  \"f\": 1e-15,\n  \"a\": 1e-18\n}\n\nexport {Part,Modal,scale}\n","import Complex from 'complex.js'\nimport {scale} from '../cards/Utils.js'\n\nconst ghz = scale[\"G\"]\n\n/*******************************************************************************\nDal circuito a Snet. Agoritmo:\n  1. Sostituisce tutti i nodi con connessioni multiple con Giunzioni finché\n     tutti i nodi compaiono due e due sole volte.\n  2. Allunga la lista dei componenti aggiungendo le sintesi. Ad esempio se le\n     parti a e b sono connesse rispettivamente ai nodi 5,6 e 6,7 creare un nuovo\n     componente cicuitale \"a-b\" connesso a 5,7 che sostituisce i precedenti.\n*******************************************************************************/\nfunction snet(state){\n  var input = 2, names = [\"S11\",\"S12\",\"S21\",\"S22\"]\n  // np è il numero dei punti e deve essere dispari\n  var np = state.data.plot.np, points = np + 1 - np%2\n  var curve = []\n  for ( var j=0 ; j < input*input; j++) {\n    curve.push({\n      name: names[j],\n      value: []\n    })\n  }\n  var net = schema(state)\n  var f0 = state.data.plot.f0 * ghz\n  var f1 = state.data.plot.f1 * ghz\n  for ( var i=0; i<points; i++) {\n    var f = ( (points-1-i) * f0 + i * f1 ) / (points -1)\n    var s = compute(f,net,state)\n    var l = 0\n    for ( var m=0; m<input; m++) {\n      for ( var n=0; n<input; n++) {\n        curve[l++].value.push(s[m][n])\n      }\n    }\n  }\n  return curve\n}\n\nfunction schema(s){\n  var l = JSON.parse(JSON.stringify(s.layout))\n  var nodes = countJunctions(l)\n  var nl = nodes.length\n  for ( var i=0; i<nodes.length; i++) {\n    var k = nodes[i]\n    switch (k){\n      case undefined: // Node is not connected\n      case 2:         // Simple Junction\n        break   // Anyway nothing to do\n      case 1:         // Port not connected inserting open circuit\n        l.push({e:\"o\",n:[i]})\n        break\n      default:        // Multiple connections inserting a multiport junction\n        var repl = []\n        for ( var m=0; m<nodes[i];m++)\n          repl.push(nl++)\n        l.push({e:\"j\"+m,n:repl})\n        l = replace(l,i,repl)\n        break\n    }\n  }\n  // Rename nodes. Ports are the first nodes 0,1\n  var ports = getPorts(l)\n  for ( i=0; i<ports.length; i++){\n    l = replace(l,ports[i],[i,i])\n  }\n  return l\n}\n\nfunction replace(l,n,a) {\n  var k = 0\n  for ( var i=0; i<l.length; i++){\n    for ( var j=0; j<l[i].n.length; j++){\n      if ( l[i].n[j] === n ) l[i].n[j] = a[k++]\n    }\n  }\n  return l\n}\n\nfunction countJunctions(l){\n  var nodes = [], i, j\n  for ( i=0; i<l.length; i++){\n    for ( j=0; j<l[i].n.length; j++){\n      var p = l[i].n[j]\n      nodes[p] = nodes[p] ? nodes[p] + 1 : 1\n    }\n  }\n  return nodes\n}\n\nfunction getPorts(l){\n  for ( var i=0; i<l.length; i++){\n    if ( l[i].e === 'p' ) return l[i].n\n  }\n}\n\nfunction compute(f,net,s){\n  var nn = JSON.parse(JSON.stringify(net))\n  // Calcolo delle matrici S di ciascune elemento\n  nn.forEach((item, i) => {\n    // se un elemento è usato più volte lo calcola più volte\n    if ( item.e !== 'p' ) {\n      nn[i].s = s.parts[item.e].smatrix(f,s.board)\n    }\n  });\n  // Calcolare la matrice della rete a partire dalle connessioni (net)\n  // Connettere i due nodi con id più elevato e ripetere finché non resta un\n  // solo elemento\n\n  //  Finché esistono più elementi (nn.length() > 2 == porte più elemento)\n  while ( nn.length > 2 ) {\n    //  Leggere e Rimuovere l'ultimo elemento (en) in nn\n    var en = nn.pop()\n    // Determinare id_nodo_max di en (max(en.n))\n    var inm = Math.max(...en.n);\n    // Determinare il nodo ei in nn che ha id_nodo_max\n    for ( var i=1; i<nn.length; i++) {\n      if ( nn[i].n.includes(inm) ) {\n        var ei = nn[i]\n        // Connettere en ed ei per il nodo id_nodo_max generando ep\n        let ep = {\n          e: [en.e,ei.e].join(\"-\"),\n          n: [...en.n, ...ei.n].filter(function(n){return n!== this},inm),\n          s: connect(en, ei, inm)\n        }\n        // Sostituire ei con ep in nn (nn[i]=ep)\n        nn[i] = ep\n        i = nn.length\n      }\n    }\n  }\n  // Ordina le porte\n  var p0 = nn[1].n.indexOf(nn[0].n[0])\n  var p1 = nn[1].n.indexOf(nn[0].n[1])\n  var snet = [\n    [ nn[1].s[p0][p0], nn[1].s[p0][p1] ],\n    [ nn[1].s[p1][p0], nn[1].s[p1][p1] ]\n  ]\n  return snet\n}\n\n// Connette due elementi circuitali (en,ei) tramite le porta p\nfunction connect(en, ei, p) {\n  var n  = en.s.length + ei.s.length\n  var see = new SMatrix(n-2,n-2),sei = new SMatrix(n-2,2)\n  var sie = new SMatrix(  2,n-2),sii = new SMatrix(  2,2)\n  /*\n  var g = new SMatrix((new Junction(2)).smatrix())\n  /*/\n  var g = new SMatrix([\n    [new Complex(0), new Complex(1)],\n    [new Complex(1), new Complex(0)]\n  ])\n  //*/\n  var i,j,k,l,m,h\n\n  // Generazione di see, sei, sie, sii mediante scansione di en ed ei\n  // see è diagonale a blocchi n-2 righe, n-2 colonne\n  // sei è verticale di n-2 righe, 2 colonne\n  // sie è orizzontale di 2 righe, n-2 colonne\n  // sii è diagonale e contiene solo i due elementi delle porte da connettere\n  h = 0 // Elemento in corso di gestione\n  m = 0 // Blocco dell'elemento (S è diagonale a blocchi))\n  k = 0 // 0 Prima o -1 dopo la porta da connettere\n  var elements = [ei,en]\n\n  while ( elements.length > 0 ) {\n    // elemento da gestire\n    var es = elements.pop()\n    var el = es.s.length\n    var pp = es.n.indexOf(p)\n    for ( i=0; i<el; i++) {\n      l = m // m Prima o m-1 dopo la porta da connettere\n      for ( j=0; j<el; j++) {\n        if ( i !== pp ) { // Porta non connessa\n          if ( j !== pp ) { // Porta non connessa\n            see.set(i+k,j+l,es.s[i][j])\n          } else { // Porta connessa\n            l = m-1\n            sei.set(i+k,h,es.s[i][j])\n          }\n        } else {  // Porta connessa\n          k = m-1\n          if ( j !== pp ) { // Porta non connessa\n            sie.set(h,j+l,es.s[i][j])\n          } else { // Porta connessa\n            l = m-1\n            sii.set(h,h,es.s[i][j])\n          }\n        }\n      }\n    }\n    m += es.s.length-1\n    k = m // m Prima o m-1 dopo la porta da connettere\n    h += 1 // prossimo elemento\n  }\n\n  var snet = see.add(sei.mul(g.sub(sii).inverse().mul(sie)))\n  return snet.val()\n}\n\nexport default class SMatrix {\n  constructor(m,n,d){\n    if ( typeof n === 'undefined' ) {\n      this.s = m\n    } else {\n      d = d || new Complex(0)\n      this.s = []\n      for ( var km=0;km<m;km++) {\n        var r = []\n        for ( var kn=0;kn<n;kn++) {\n          r.push( new Complex(d) )\n        }\n        this.s.push(r)\n      }\n    }\n  }\n  set(m,n,d){\n    this.s[m][n] = d\n  }\n  val() {\n    return this.s\n  }\n  add(s2){\n    var s1 = this.s\n    var s2s = s2.val()\n    var n1 = s1.length\n    var n2 = s1[0].length\n    var s = new Array(n1).fill(0)\n    for (var i=0;i<s1.length;i++){\n      s[i] = new Array(n2).fill(0)\n      for (var j=0;j<s1[i].length;j++){\n        s[i][j] = s1[i][j].add(s2s[i][j])\n      }\n    }\n    return new this.constructor(s)\n  }\n  sub(s2){\n    var s1 = this.s\n    var s2s = s2.val()\n    var n1 = s1.length\n    var n2 = s1[0].length\n    var s = new Array(n1).fill(0)\n    for (var i=0;i<s1.length;i++){\n      s[i] = new Array(n2).fill(0)\n      for (var j=0;j<s1[i].length;j++){\n        s[i][j] = s1[i][j].sub(s2s[i][j])\n      }\n    }\n    return new this.constructor(s)\n  }\n  mul(s2) {\n    var s1 = this.s\n    var s2s = s2.val()\n\n    var n1 = s1.length\n    var n = s1[0].length\n    var n2 = s2s[0].length\n\n    var s = new Array(n1).fill(0)\n    for (var i=0;i<n1;i++){\n      s[i] = new Array(n2).fill(0)\n      for (var j=0;j<n2;j++){\n        s[i][j] = s1[i][0].mul(s2s[0][j])\n        for (var k=1;k<n;k++){\n          s[i][j] = s[i][j].add(new Complex(s1[i][k]).mul(s2s[k][j]))\n        }\n      }\n    }\n    return new this.constructor(s)\n  }\n  inverse() {\n    var s = this.s\n    var det = s[0][0].mul(s[1][1]).sub(s[0][1].mul(s[1][0]))\n    var idet = det.inverse()\n    var si = [\n      [ s[1][1].mul(idet),         s[0][1].mul(idet).mul(-1) ],\n      [ s[1][0].mul(idet).mul(-1), s[0][0].mul(idet) ]\n    ]\n    return new this.constructor(si)\n  }\n  toString(){\n    var nd = 3\n    var nr = this.s.length\n    var nc = this.s[0].length\n    var s = new SMatrix(nr,nc,\"\")\n    for ( var i=0;i<nr;i++ ) {\n      for ( var j=0;j<nc;j++ ) {\n        var c = this.s[i][j]\n        var v = \"(\"+this.format(c.re,nd)+\",\"+this.format(c.im,nd)+\")\"\n        s.set(i,j,v)\n      }\n    }\n    return s\n  }\n  format(x,n){\n    return x.toLocaleString(undefined,{ minimumFractionDigits: n, maximumFractionDigits: n })\n  }\n}\n\nexport {snet}\n","import React from 'react'\nimport Complex from 'complex.js'\nimport {scale} from '../cards/Utils.js'\n\nclass CircuitElement {\n  toString(){ return this.data.name }\n  getData(){  return this.data }\n  smatrix(){  return [ [new Complex(0)] ] } // match\n  size(){     return { l:1, w:1 } }\n  elements(){\n    var list = []\n    Object.entries(parts).forEach(([k, e]) => {\n      e.n = k\n      list.push(e)\n    })\n    return list\n  }\n  render(){\n    return (\n      <div className=\"w3-container w3-large w3-center w3-padding\">No parametres to define</div>\n    )\n  }\n}\n\nexport default class Circuit extends CircuitElement {\n  constructor(data){\n    super()\n    this.data = typeof data !== 'undefined' ? data :\n                { name: \"\" }\n    if ( parts[this.data.name] )\n      return new (parts[this.data.name].v)(data)\n  }\n}\n\n// Elementi circuitali ====================\nclass TLine extends CircuitElement {\n  constructor(data) {\n    super()\n    this.data = data\n    this.data.l = 0//5.832\n    this.data.w = 0//.649\n  }\n  toString() {\n    return [\"µ strip\",\"Z=\",this.data.z+\"Ω,\",\"L=\",this.data.phi+\"°\"].join(\" \")\n  }\n  size(){\n    return {\n      l: this.l,\n      w: this.w\n    }\n  }\n  smatrix(f,board) {\n    var c = 3e8\n    var z = this.data.z/board.zd\n    var y = 1/z\n    var wsh = 1 // da calcolare (pag 25) W/h\n    var er = board.er\n    var ereq = .5 * ( (er+1) + (er-1)/Math.sqr(1+10*wsh) )\n    var ge = 2*Math.PI*f*scale[\"G\"]*Math.sqrt(ereq)/c\n    var ep = Math.exp( + ge * this.data.l*scale[\"m\"] )\n    var em = Math.exp( - ge * this.data.l*scale[\"m\"] )\n    var den = (ep+em) + .5 * (z+y) * (ep-em)\n    var g = new Complex( (.5 * (z-y) * (ep-em)) / den )\n    var t = new Complex(2/den)\n    return [\n      [g, t],\n      [t, g]\n    ]\n  }\n  render(){\n    return (\n      <div className=\"w3-container\">\n        <div className=\"w3-row\">\n          <div className=\"w3-col w3-padding s12 m3 l3\">\n            <label>Imp. (Ω)</label>\n            <input className=\"w3-input w3-round-large\" type=\"number\" name=\"z\" defaultValue={this.data.z} />\n          </div>\n          <div className=\"w3-col w3-padding s12 m3 l3\">\n            <label>Phase (°)</label>\n            <input className=\"w3-input w3-round-large\" type=\"number\" name=\"phi\" defaultValue={this.data.phi} />\n          </div>\n          <div className=\"w3-col w3-padding s12 m3 l3\">\n            <label>Len. (mm)</label>\n            <input className=\"w3-input w3-round-large\" type=\"number\" name=\"l\" defaultValue={this.data.l} />\n          </div>\n          <div className=\"w3-col w3-padding s12 m3 l3\">\n            <label>Wid. (mm)</label>\n            <input className=\"w3-input w3-round-large\" type=\"number\" name=\"w\" defaultValue={this.data.w} />\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nclass Lumped extends CircuitElement {\n  constructor(data) {\n    super()\n    this.data = data\n    this.data.t = typeof data.t != \"undefined\" ? data.t : \"serial\" // Serie\n    this.data.s = typeof data.s != \"undefined\" ? data.s : 4  // 4mm length\n  }\n  toString() {\n    var c = this.data.t === 'serial' ? \"+\" : \"||\"\n    var v = [this.data.r+\"Ω\"]\n    if ( typeof this.data.l != \"undefined\") v.push(this.data.l+\"nH\")\n    if ( typeof this.data.c != \"undefined\") v.push(this.data.c+\"pF\")\n    var vt = v.join(c)\n    return [this.data.name,vt,this.data.s+\"mm\"].join(\" \")\n  }\n  size(){\n    return {\n      l: this.data.s,\n      w: .5*this.data.s\n    }\n  }\n  smatrix(f,board) {\n    var z, xl, xc, w = 2 * Math.PI * f\n    var r = this.data.r\n    var l = this.data.l*scale[\"n\"]\n    var c = this.data.c*scale[\"p\"]\n    if ( this.data.t === 'serial' ) {\n      xl = w * ( l || 0 )\n      xc = !c ? 0 : 1/(w*c)\n      z = new Complex([r,xl-xc])\n    } else {\n      xl = !l ? 0 : 1/(w*l)\n      xc = w * ( c || 0 )\n      z = new Complex([1/r,-xl+xc]).inverse()\n    }\n    z = z.div(board.zd)\n    var den = new Complex(z).add(2).inverse()\n    var g = new Complex(z).mul(den)\n    var t = new Complex(2).mul(den)\n    return [\n      [g, t],\n      [t, g]\n    ]\n  }\n  render(){\n    return (\n      <div className=\"w3-container\">\n        <div className=\"w3-row\">\n          <div className=\"w3-col w3-padding s12 m4 l3\">\n            <label>Connection type</label>\n            <select className=\"w3-select w3-round-large\" defaultValue={this.data.t} name=\"t\" title=\"Connection type\">\n              <option value=\"serial\">Series</option>\n              <option value=\"parallel\">Parallel</option>\n            </select>\n          </div>\n        </div>\n        <div className=\"w3-row\">\n          <div className=\"w3-col w3-padding s12 m3 l3\">\n            <label>Res. (Ω)</label>\n            <input className=\"w3-input w3-round-large\" name=\"r\" defaultValue={this.data.r} type=\"number\" step=\".001\" required/>\n          </div>\n          <div className=\"w3-col w3-padding s12 m3 l3\">\n            <label>Ind. (nH)</label>\n            <input className=\"w3-input w3-round-large\" name=\"l\" defaultValue={this.data.l} type=\"number\" step=\".001\" />\n          </div>\n          <div className=\"w3-col w3-padding s12 m3 l3\">\n            <label>Cap. (pF)</label>\n            <input className=\"w3-input w3-round-large\" name=\"c\" defaultValue={this.data.c} type=\"number\" step=\".001\" />\n          </div>\n          <div className=\"w3-col w3-padding s12 m3 l3\">\n            <label>Len. (mm)</label>\n            <input className=\"w3-input w3-round-large\" name=\"s\" defaultValue={this.data.s} type=\"number\" step=\".001\" required />\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\n// Elementi di supporto ====================\nclass Junction extends CircuitElement { // Connection (n=2), Tee (n=3) or cross (n=4)\n  constructor(data) {\n    super(data)\n    this.data = data\n    this.data.p = typeof data.p === \"number\" ? data.p : 2 // Ports\n  }\n  toString() {\n    return [this.name,this.p,\"ports\"].join(\" \")\n  }\n  smatrix() {\n    var p = this.data.p\n    var s = []\n    for(var i=0; i<p; i++) {\n      s[i] = [];\n      for(var j=0; j<p; j++) {\n        s[i][j] = i === j ? new Complex((2-p)/(p)) : new Complex((2  )/(p))\n      }\n    }\n    return s\n  }\n}\n\nclass Tee extends CircuitElement { // Tee Junction(n=3)\n  smatrix() {\n    var g = new Complex(-1./3)\n    var t = new Complex( 2./3)\n    return [ [g,t,t],[t,g,t],[t,t,g] ]\n  }\n}\n\nclass Cross extends CircuitElement { // Cross Junction(n=4)\n  smatrix() {\n    var g = new Complex(-.5)\n    var t = new Complex( .5)\n    return [ [g,t,t,t],[t,g,t,t],[t,t,g,t],[t,t,t,g] ]\n  }\n}\n\nclass Open extends CircuitElement {\n  smatrix(f) { return [ [new Complex(1)] ] }\n  size()     { return { l:0, w:0 } }\n}\n\nclass Ground extends CircuitElement {\n  smatrix(f) { return [ [new Complex(-1)] ] }\n  size()     { return { l:1, w:1 } }\n}\n\nconst parts = {\n  lumped:   {v:Lumped,   d:\"Lumped element\"},\n  tline:    {v:TLine,    d:\"Microstrip transmission line\"},\n  junction: {v:Junction, d:\"Multiport junction\"},\n  tee:      {v:Tee,      d:\"Tee junction\"},\n  cross:    {v:Cross,    d:\"Cross junction\"},\n  open:     {v:Open,     d:\"Open circuit\"},\n  ground:   {v:Ground,   d:\"Short to ground\"},\n}\n","import React from 'react'\nimport {Part,Modal} from './Utils.js'\n\nexport default class Plot extends Part {\n  render(){\n    var color = this.props.conf.colors\n    var value = this.props.value\n    var data  = this.props.data\n    var board = this.props.board\n    var np = data.plot.np\n    var fd = board.fd\n    var nc = (np-1)*(fd-data.plot.f0)/(data.plot.f1-data.plot.f0)\n    nc = Math.max(Math.min(Math.floor(nc),np-1),0)\n    var fp = data.plot.f0 + nc * (data.plot.f1-data.plot.f0) / (np-1)\n    return(\n      <div className=\"w3-card-4 w3-margin-bottom w3-border w3-border-green w3-topbar\">\n        <Modal title=\"Number of data points\" show={this.state.show === 0} handleOk={this.setData} handleCancel={this.hideModal}>\n          <div className=\"w3-center\">\n            <input className=\"w3-input\" name=\"data.plot.np\" defaultValue={np} type=\"number\" min=\"5\" max=\"10001\" step=\"2\" required/>\n          </div>\n        </Modal>\n        <div className=\"w3-center\"><sup className=\"w3-black w3-large w3-padding\">{value}</sup></div>\n        <div className=\"w3-margin-left w3-margin-right\" onClick={(e)=>this.showModal(0)}>Points {np}</div>\n        <div className=\"w3-margin-left w3-margin-right\">Smith radius <span className=\"w3-text-green\">{this.fmt(data.plot.r,2)}</span></div>\n        <div className=\"w3-margin-left w3-margin-right\">\n          <table>\n            <tbody>\n              <tr><td></td><td>f</td><td className=\"w3-text-green\">{this.fmt(fp,3)}</td><td>GHz</td><td></td><td></td></tr>\n              {data.curve.map((c, i) => {\n                  return (\n                    <tr key={i}>\n                      <td style={{\"color\": color[i]}}>x</td>\n                      <td>{c.name}</td>\n                      <td className=\"w3-text-green w3-right\">{this.db(c.value[nc].abs())}</td><td>dB</td>\n                      <td className=\"w3-text-green w3-right\">{this.deg(c.value[nc].arg())}</td><td>°</td>\n                    </tr>\n                  )\n                })\n              }\n            </tbody>\n          </table>\n        </div>\n      </div>\n    )\n  }\n}\n","import React from 'react'\nimport Part from './Utils.js'\n\nexport default class Info extends Part {\n  render(){\n    var value = this.props.value\n    var info = this.props.info\n    return(\n      <div className=\"w3-card-4 w3-margin-bottom w3-border w3-border-red w3-topbar\">\n        <div className=\"w3-center\"><sup className=\"w3-black w3-large w3-padding\">{value}</sup></div>\n        <div className=\"w3-margin-left w3-margin-right\">\n          <table>\n            <tbody>\n              <tr><td>l:</td><td>{info.l}</td><td>mm</td></tr>\n              <tr><td>w:</td><td>{info.w}</td><td>mm</td></tr>\n            </tbody>\n          </table>\n        </div>\n      </div>\n    )\n  }\n}\n","import React from 'react'\nimport Circuit from '../net/CircuitElements.js'\nimport {Part,Modal} from './Utils.js'\n\nexport default class Parts extends Part {\n  constructor(props){\n    super(props)\n    this.onChangeData = this.props.onChangeData\n    this.value = this.props.value\n    var parts = this.props.parts\n    this.state.modals = [\n      { n: \"a\", v: parts.a },\n      { n: \"b\", v: parts.b },\n      { n: \"c\", v: parts.c },\n      { n: \"d\", v: parts.d },\n      { n: \"e\", v: parts.e },\n      { n: \"f\", v: parts.f },\n      { n: \"g\", v: parts.g },\n      { n: \"h\", v: parts.h },\n      { n: \"i\", v: parts.i },\n    ]\n    this.state.current = { n:\"x\", v:new Circuit()}\n    this.handleChange = this.handleChange.bind(this)\n    this.editParams = this.editParams.bind(this)\n  }\n  checkData(event){\n    event.preventDefault()\n    var name = [\"parts\",this.state.current.n].join(\".\")\n    var val = this.state.current.v.getData()\n    for ( var i=0; i<event.target.length; i++) {\n      if ( event.target[i].tagName !== \"BUTTON\" ) {\n        if ( event.target[i].type === 'number' ) {\n          var c = parseFloat(event.target[i].value)\n          if ( ! isNaN(c) )\n            val[event.target[i].name] = c\n        } else {\n          val[event.target[i].name] = event.target[i].value\n        }\n      }\n    }\n    var v = {}\n    v[name] = new Circuit(val)\n    console.log(v)\n    this.onChangeData(v)\n    this.hideModal()\n  }\n  handleChange(evt){\n    console.log(this.state.current)\n    var c = this.state.current\n    c.name = evt.target.value\n    c.v = new Circuit({name:c.name})\n    c.i = 1-c.i\n    this.setState({\"current\":c})\n    console.log(this.state.current)\n  }\n  editParams(i){\n    const ei = this.state.modals[i]\n    var c = this.state.current\n    c.i =\n    c.n = ei.n\n    c.v = new Circuit(ei.v.getData())\n    c.name = ei.v.name\n    this.setState({\"current\":c})\n    this.showModal()\n  }\n  render(){\n    const value = this.value\n    const modals = this.state.modals\n    const ce = this.state.current\n    const step = this.state.step\n    return(\n      <div key={step} className=\"w3-card-4 w3-margin-bottom w3-border w3-border-yellow w3-topbar\">\n        <Modal key={ce.i} title=\"Circuit element\" show={this.state.show === 0} handleCancel={this.hideModal} handleOk={(e)=>this.checkData(e)}>\n          <div>\n            <label className=\"w3-large\" htmlFor={ce.i}>Part: {ce.n}</label>\n            <select id={ce.i} className=\"w3-select w3-round-large\" value={ce.v.getData().name} onChange={this.handleChange} name=\"name\" title=\"Circhuit element type\">\n              <option value=\"\">Chose an element</option>\n              {ce.v.elements().map((e,i)=>{\n                return <option key={i} value={e.n}>{e.d}</option>\n              })}\n            </select>\n            {ce.v.render()}\n          </div>\n        </Modal>\n        <div className=\"w3-center\"><sup className=\"w3-black w3-large w3-padding\">{value}</sup></div>\n        <div className=\"w3-margin-left w3-margin-right\">\n          <table>\n            <tbody>\n              {modals.map((m, i)=>{\n                return (\n                  <tr key={i} onClick={()=>this.editParams(i)}><td>{m.n}</td><td>{m.v.toString()}</td></tr>\n                )\n              })}\n            </tbody>\n          </table>\n        </div>\n      </div>\n    )\n  }\n}\n","import React from 'react'\nimport {Part,Modal} from './Utils.js'\n\nexport default class Board extends Part {\n  render(){\n    var value = this.props.value\n    var board = this.props.board\n    var modals = [\n      { n: \"board.zd\", v: board.zd, u: \"Ω\",   title: \"Impedance\" },\n      { n: \"board.fd\", v: board.fd, u: \"GHz\", title: \"Frequency\" },\n      { n: \"board.er\", v: board.er, u: \"\",    title: \"Costante dielettrica\" },\n      { n: \"board.h\",  v: board.h,  u: \"mm\",  title: \"Spessore\" },\n      { n: \"board.s\",  v: board.s,  u: \"mm\",  title: \"s\" },\n      { n: \"board.c\",  v: board.c,  u: \"mm\",  title: \"c\" },\n    ]\n    return(\n      <div className=\"w3-card-4 w3-margin-bottom w3-border w3-border-blue w3-topbar\">\n        {modals.map((m, i)=>{\n          return (\n            <Modal key={i} title={[m.title,m.u].join(\" - \")} show={this.state.show === i} handleCancel={this.hideModal} handleOk={(e)=>this.setData(e,m.n)}>\n              <div className=\"w3-center\">\n                <input ref={input => input && input.focus()} className=\"w3-input\" name={m.n} defaultValue={m.v} type=\"number\" step=\".001\"/>\n              </div>\n            </Modal>\n          )\n        })}\n        <div className=\"w3-center\"><sup className=\"w3-black w3-large w3-padding\">{value}</sup></div>\n        <div className=\"w3-margin-left w3-margin-right\">\n          <table>\n            <tbody>\n            {modals.map((m, i)=>{\n              return (\n                <tr key={i} onClick={(e)=>this.showModal(i)}><td>{m.n.split('.').pop()}</td><td className=\"w3-right\">{this.fmt(m.v,3)}</td><td>{m.u}</td></tr>\n              )\n            })}\n            </tbody>\n          </table>\n        </div>\n      </div>\n    )\n  }\n}\n","import React from 'react'\nimport Part from './Utils.js'\n\nexport default class Layout extends Part {\n  constructor(props){\n    super(props)\n    this.canvas = null\n  }\n\n  componentDidMount() {  this.drawGraph() }\n  componentDidUpdate() { this.drawGraph() }\n\n  setCanvas = (e)=>{ this.canvas = e }\n\n  drawGraph(){\n    var parts = this.props.parts\n    var layout = this.props.layout\n    var board = this.props.board\n    var canvas = this.canvas\n    var dimensions = canvas.getBoundingClientRect()\n    canvas.width = dimensions.width\n    canvas.height = canvas.width\n    let ctx = canvas.getContext(\"2d\")\n    canvas.height = canvas.width\n    const x0 = 20\n    const mx = canvas.width - 2 * x0\n    const my = canvas.height - 2 * x0\n    // Substrate borders and Ports\n    ctx.beginPath()\n      ctx.font = '24px serif';\n      ctx.strokeStyle = \"#FFFFFF\"\n      ctx.strokeRect(x0,0,mx,my)\n      ctx.fillStyle = \"#FF0000\"\n      const ph = 4, pw = 4\n      ctx.fillText(\"1\",x0-4*pw,.5*my+ph)\n      ctx.fillRect(x0-pw,.5*my-ph,2*pw, 2*ph)\n      ctx.fillText(\"2\",x0+mx+2*pw,.5*my+ph)\n      ctx.fillRect(x0+mx-pw,.5*my-ph,2*pw, 2*ph)\n    ctx.stroke()\n\n    var scale = mx/board.s\n\n    // Layout\n    var xr = .5*board.s, yr = .5*board.s // mm\n    var nodi = [[xr,yr]]\n    layout.forEach((item, i) => {\n      if ( 'op'.indexOf(item.e) === -1 ) {\n        layout[i].dim = parts[item.e] ? parts[item.e].size() : {l:0,w:0}\n        var ex = item.n\n        nodi[ex[0]] = nodi[ex[0]] || [xr+5*i,yr+5*i]\n        ctx.beginPath()\n        ctx.fillStyle = \"#FFFF00\"\n        ctx.arc(nodi[ex[0]][0]*scale,nodi[ex[0]][1]*scale,2,0,2*Math.PI)\n        ctx.fill()\n        if ( ex[1] ) {\n          if ( 'ns'.indexOf(item.d) !== -1 ) {\n            var tmp = layout[i].dim.w\n            layout[i].dim.w = layout[i].dim.l\n            layout[i].dim.l = tmp\n            if ( 's'.indexOf(item.d) !== -1 ) {\n              nodi[ex[1]] = [nodi[ex[0]][0],nodi[ex[0]][1]+layout[i].dim.w]\n            } else {\n              nodi[ex[1]] = [nodi[ex[0]][0],nodi[ex[0]][1]-layout[i].dim.w]\n            }\n          } else {\n            if ( 'e'.indexOf(item.d) !== -1 ) {\n              nodi[ex[1]] = [nodi[ex[0]][0]+layout[i].dim.l,nodi[ex[0]][1]]\n            } else {\n              nodi[ex[1]] = [nodi[ex[0]][0]-layout[i].dim.l,nodi[ex[0]][1]]\n            }\n          }\n          ctx.beginPath()\n          ctx.fillStyle = \"#FFFF00\"\n          ctx.arc(nodi[ex[1]][0]*scale,nodi[ex[1]][1]*scale,2,0,2*Math.PI)\n          ctx.fill()\n        }\n      }\n    })\n    // Componenti\n    ctx.beginPath()\n      ctx.font = '16px serif'\n      ctx.textAlign = 'center'\n      ctx.textBaseline = 'middle'\n      ctx.fillStyle = \"#FFFF00\"\n      ctx.strokeStyle = \"#00FFFF\"\n      layout.forEach((item, i) => {\n        if ( 'op'.indexOf(item.e) === -1 ) { // Non visualizza porte e open\n          var n = item.n[0]\n          var xri = nodi[n][0]*scale, yri = nodi[n][1]*scale\n          var l = item.dim.l*scale, w = item.dim.w*scale\n          if ( item.d === 'e' ) {\n            ctx.rect(xri,yri-.5*w,l,w)\n            ctx.fillText(item.e,xri+.5*l,yri)\n          } else if ( item.d === 'w' ) {\n            ctx.rect(xri,yri-.5*w,-l,w)\n            ctx.fillText(item.e,xri-.5*l,yri)\n          } else if ( item.d === 'n' ) {\n            ctx.rect(xri-.5*l,yri,l,-w)\n            ctx.fillText(item.e,xri,yri-.5*w)\n          } else if ( item.d === 's' ) {\n            ctx.rect(xri-.5*l,yri,l,w)\n            ctx.fillText(item.e,xri,yri+.5*w)\n          } else { // centered\n            ctx.rect(xri-.5*l,yri-.5*w,l,w)\n          }\n        }\n      })\n    ctx.stroke()\n    // porte\n    layout.forEach((item, i) => {\n      if ( 'p'.indexOf(item.e) !== -1 ) {\n        var el = item.n\n        ctx.beginPath()\n          ctx.lineWidth = 5\n          ctx.fillStyle = \"#FFFF00\"\n          ctx.strokeStyle = \"#00FF00\"\n          ctx.moveTo(x0, .5*my)\n          ctx.lineTo(nodi[el[0]][0]*scale, nodi[el[0]][1]*scale)\n          ctx.moveTo(x0+mx, .5*my)\n          ctx.lineTo(nodi[el[1]][0]*scale, nodi[el[1]][1]*scale)\n        ctx.stroke()\n      }\n    })\n  }\n\n  render(){\n    var value = this.props.value\n    return(\n      <div className=\"w3-card-4 w3-margin-bottom w3-margin-left w3-border w3-border-cyan w3-topbar\">\n        <div className=\"w3-center\"><sup className=\"w3-black w3-large w3-padding\">{value}</sup></div>\n        <div>\n          <canvas ref={this.setCanvas}/>\n        </div>\n      </div>\n    )\n  }\n}\n","import React from 'react'\nimport Part from './Utils.js'\n\nexport default class Smith extends Part {\n  constructor(props){\n    super(props)\n    this.canvas = null\n  }\n\n  componentDidMount() {  this.drawGraph() }\n  componentDidUpdate() { this.drawGraph() }\n\n  setCanvas = (e)=>{ this.canvas = e }\n\n  drawGraph(){\n    var data = this.props.data\n    var conf = this.props.conf\n    var canvas = this.canvas\n    var dimensions = canvas.getBoundingClientRect()\n    canvas.width = dimensions.width\n    canvas.height = canvas.width\n    let ctx = canvas.getContext(\"2d\")\n    const d = canvas.width\n    const r = .5 * d\n    const cx = r, cy = r\n    const pi = Math.PI, dpi = 2*pi\n    ctx.width = d\n    ctx.height = d\n    var i, j, zn, ri, rr\n    // Assi secondari (molto sbiaditi)\n    ctx.beginPath()\n      ctx.strokeStyle = \"#003F00\"\n      for ( i=1;i<10;i++) {\n        zn = i/10 // (.1, .2, ..., .9)*z0\n        rr = r*(1/(1+zn))\n        ri = r*(1/zn)\n        ctx.arc(d-rr, cy, rr, 0, dpi)\n        ctx.arc(d, cy-ri, ri, 0, dpi)\n        ctx.arc(d, cy+ri, ri, 0, dpi)\n        zn = 10-i  // (1, 2, ..., 9)*z0\n        rr = r*(1/(1+zn))\n        ri = r*(1/zn)\n        ctx.arc(d-rr, cy, rr, 0, dpi)\n        ctx.arc(d, cy-ri, ri, 0, dpi)\n        ctx.arc(d, cy+ri, ri, 0, dpi)\n      }\n    ctx.stroke()\n    // Assi principali (sbiaditi)\n    ctx.beginPath()\n      ctx.strokeStyle = \"#00AF00\"\n      ctx.moveTo(0, r)\n      ctx.lineTo(d, r)\n      zn = 0 // 1 * z0\n      rr = r*(1/(1+zn))\n      ctx.arc(d-rr, cy, rr, 0, dpi)\n      zn = 1 // 1 * z0\n      rr = r*(1/(1+zn))\n      ri = r*(1/zn)\n      ctx.arc(d-rr, cy, rr, 0, dpi)\n      ctx.arc(d, cy-ri, ri, 0, dpi)\n      ctx.arc(d, cy+ri, ri, 0, dpi)\n    ctx.stroke()\n    // Curve\n    for ( j=0; j<data.curve.length; j++) {\n      ctx.beginPath()\n        ctx.strokeStyle = conf.colors[j]\n        ctx.setLineDash([]);\n        var dj = data.curve[j].value\n        for (i=0; i<dj.length; i++ ){\n          var px = cx + r * dj[i].re\n          var py = cy - r * dj[i].im\n          if ( i === 0 ) {\n            ctx.moveTo(px, py)\n          } else {\n            ctx.lineTo(px, py)\n          }\n        }\n      ctx.stroke()\n    }\n  }\n\n  render(){\n    var value = this.props.value\n    return(\n      <div className=\"area w3-card-4 w3-margin-bottom w3-margin-left w3-border w3-border-black w3-topbar\">\n        <div className=\"w3-center\"><sup className=\"w3-black w3-large w3-padding\">{value}</sup></div>\n        <div>\n          <canvas ref={this.setCanvas}/>\n        </div>\n      </div>\n    )\n  }\n}\n","import React from 'react'\nimport {Part,Modal} from './Utils.js'\n\nexport default class Graph extends Part {\n  constructor(props){\n    super(props)\n    this.canvas = null\n  }\n\n  componentDidMount() {  this.drawGraph() }\n  componentDidUpdate() { this.drawGraph() }\n\n  setCanvas = (e)=>{ this.canvas = e }\n\n  drawGraph(){\n    var data = this.props.data\n    var conf = this.props.conf\n    var canvas = this.canvas\n    var dimensions = canvas.getBoundingClientRect()\n    canvas.width = dimensions.width\n    canvas.height = dimensions.height\n    let ctx = canvas.getContext(\"2d\")\n    ctx.font = '12px serif';\n    var off = 24\n    const mx = canvas.width - 2*off\n    const my = canvas.height - off\n    var i, j, dx, p;\n    var mdb = Math.ceil(20*Math.log10(data.plot.r))\n    var yrange = [\n      mdb-conf.range,mdb\n    ]\n    // Rettangolo\n    ctx.beginPath()\n      ctx.strokeStyle = \"#007F00\"\n      ctx.setLineDash([]);\n      ctx.rect(off,0,mx,my)\n    ctx.stroke()\n    // Griglia\n    ctx.beginPath()\n      ctx.strokeStyle = \"#007F00\"\n      ctx.setLineDash([8,2]);\n      dx = mx/10\n      for ( i=1; i<10; i++) {\n        ctx.moveTo(off+dx*i, 0)\n        ctx.lineTo(off+dx*i, my)\n      }\n      var ygrid = 10* Math.floor(mdb/10.)\n      while ( (p = my * (yrange[1]-ygrid)/(yrange[1]-yrange[0])) < my ) {\n        ctx.moveTo(off+0, p)\n        ctx.lineTo(off+mx,p)\n        ygrid -= 10\n      }\n    ctx.stroke()\n    // Curve\n    for ( j=0; j<data.curve.length; j++) {\n      ctx.beginPath()\n        ctx.strokeStyle = conf.colors[j]\n        ctx.setLineDash([]);\n        var dj = data.curve[j].value\n        dx = mx/(dj.length-1)\n        for (i=0; i<dj.length; i++ ){\n          var vdb = 20 * Math.log10(dj[i].abs())\n          p = Math.min(my,my * (yrange[1]-vdb)/(yrange[1]-yrange[0]))\n          if ( i === 0 ) {\n            ctx.moveTo(off+dx*i, p)\n          } else {\n            ctx.lineTo(off+dx*i, p)\n          }\n        }\n      ctx.stroke()\n    }\n  }\n\n  render(){\n    var value = this.props.value\n    var data = this.props.data\n    var conf = this.props.conf\n    var f0 = data.plot.f0\n    var f1 = data.plot.f1\n    var fm = .5*(f0+f1)\n    var modals = [\n      { n: \"data.plot.f0\", v: data.plot.f0, u: \"GHz\", title: \"Frequenza minima\" },\n      { n: \"data.plot.f1\", v: data.plot.f1, u: \"GHz\", title: \"Frequenza massima\" },\n    ]\n    return(\n      <div className=\"area w3-card-4 w3-margin-bottom w3-margin-left w3-border w3-border-black w3-topbar\">\n        {modals.map((m, i)=>{\n          return (\n            <Modal  key={i} title={[m.title,m.u].join(\" - \")} show={this.state.show === i} handleCancel={this.hideModal} handleOk={this.setData}>\n              <div className=\"w3-center\">\n                <input ref={input => input && input.focus()} className=\"w3-input\" name={m.n} defaultValue={m.v} type=\"number\" step=\".01\"/>\n              </div>\n            </Modal>\n          )\n        })}\n        <div className=\"w3-center\"><sup className=\"w3-black w3-large w3-padding\">{value}</sup></div>\n        <div className=\"w3-display-container w3-text-white\">\n        <span className=\"w3-display-topright w3-text-green\">{Math.ceil(20*Math.log10(data.plot.r))}</span>\n        <span className=\"w3-display-right w3-margin-bottom\">|S|<br/>dB</span>\n        <span className=\"w3-display-bottomright w3-margin-bottom w3-text-green\">{Math.ceil(20*Math.log10(data.plot.r))-conf.range}</span>\n        <span className=\"w3-display-bottomleft  w3-margin-left\" onClick={(e)=>this.showModal(0)} >{this.fmt(f0,2)}</span>\n        <span className=\"w3-display-bottommiddle w3-text-green\">{this.fmt(fm,3)} GHz</span>\n        <span className=\"w3-display-bottomright w3-margin-right\" onClick={(e)=>this.showModal(1)} >{this.fmt(f1,2)}</span>\n        <canvas ref={this.setCanvas} />\n        </div>\n      </div>\n    )\n  }\n}\n","/*******************************************************************************\nComponenti\n  - Mancano tutte le linee\nNetwork analysis: net.js\n  - Migliorare algoritmo scomposizione e ricomposizione della rete\n  - Trasformare in una classe ?!\nEditing e disegno del circuito\n  - Manca viewer per componenti con più di 2 porte. (serve ?)\n  - Rifattorizzare il disegno nel componente\n  - Manca editor\nComponenti\n  - Completare le definizioni dei componenti\n*******************************************************************************/\nimport React from 'react'\n// Utility functions\n// Circuit parts\nimport {snet} from './net/Network.js'\nimport Circuit from './net/CircuitElements.js'\n// Graphic cards\nimport Plot from './cards/Plot.js'\nimport Info from './cards/Info.js'\nimport Parts from './cards/Parts.js'\nimport Board from './cards/Board.js'\nimport Layout from './cards/Layout.js'\nimport Smith from './cards/Smith.js'\nimport Graph from './cards/Graph.js'\nimport './css/w3.css'\nimport './css/index.css'\n\nconst appName = \"uwCAD\"\n\nexport default class App extends React.Component {\n  constructor(props) {\n    super(props)\n    /*\n    const s = JSON.parse( localStorage.getItem(appName) || JSON.stringify(startup) )\n    /*/\n    const s = startup\n    //*/\n    localStorage.setItem(appName,JSON.stringify(s))\n    this.state = s\n    for (const [key, value] of Object.entries(s.parts)) {\n      this.state.parts[key] = new Circuit(value)\n    }\n    this.state.step = 0\n    this.state.data.curve = snet(this.state)\n    this.state.cache = {name:\"Unknown cache name\"}\n    this.onChangeData = this.onChangeData.bind(this)\n  }\n  componentDidMount() {\n    const apiUrl = '/cache.infos'\n    console.log(apiUrl)\n    fetch(apiUrl)\n      .then((response) => response.json())\n      .then((data) => {\n        console.log(data)\n        this.setState({\"cache\":data})\n        this.setState({\"step\":1-this.state.step})\n      })\n  }\n\n  onChangeData(values){\n    var s = this.state\n    var step = s.step\n    console.log(\"updating values\")\n    for( var p in values ) {\n      console.log(p,values[p])\n      var current = s\n      var names = p.split('.')\n      while ( names.length !== 1 ) {\n        current = current[names.shift()]\n      }\n      current[names[0]] = values[p]\n    }\n    console.log(s.parts)\n    delete s.data.curve\n    delete s.step\n    localStorage.setItem(appName,JSON.stringify(s))\n    s.data.curve = snet(s)\n    s.step = step+1\n    this.setState(s)\n  }\n\n  render() {\n    return (\n      <div key={this.state.step} className=\"w3-margin\" >\n        <div>{this.state.cache.name}</div>\n        <div className=\"w3-row\">\n          <div className=\"w3-col m5 l4\">\n            <Plot value=\"F2 : PLOT\" data={this.state.data} conf={this.state.conf} board={this.state.board} onChangeData={this.onChangeData} />\n            <Info value=\"INFO\" info={this.state.info} />\n            <Parts value=\"F3 : PARTS\" parts={this.state.parts} onChangeData={this.onChangeData} />\n            <Board value=\"F4 : BOARD\" board={this.state.board} onChangeData={this.onChangeData} />\n          </div>\n          <div className=\"w3-col m7 l8\">\n            <div className=\"w3-row\">\n              <div className=\"w3-col m6 l6\">\n                <Layout value=\"F1 : LAYOUT\" parts={this.state.parts} layout={this.state.layout} board={this.state.board} />\n              </div>\n              <div className=\"w3-col m6 l6\">\n                <Smith value=\"Smith chart\" data={this.state.data} conf={this.state.conf} />\n              </div>\n            </div>\n            <div className=\"w3-row\">\n              <div className=\"w3-col m12 l12\">\n                <Graph value=\"|S| vs Frequency\" data={this.state.data} conf={this.state.conf} onChangeData={this.onChangeData} />\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nvar startup = {\n  conf: {\n    colors: [\"#FF0000\", \"#00FFFF\", \"#0000FF\", \"#FFFF00\"], // Curve colors\n    range: 40, // dB range for the |S| vs freq. graph\n  },\n  info:{\n    l: \"? 2.916 ?\",\n    w: \"? 0.649 ?\"\n  },\n  lay_out:[\n    {e:\"p\",n:[0,1]},  // Ports\n    {e:\"i\",n:[0,1],d:\"e\"},  // part\n  ],\n  layout:[\n    {e:\"p\",n:[0,1]},  // Ports\n    {e:\"a\",n:[0,2],d:\"e\"},  // part\n    {e:\"b\",n:[2,1],d:\"e\"},  // part\n    {e:\"c\",n:[2,3],d:\"s\"},  // part\n    {e:\"s\",n:[3],d:\"c\"},    // Short to ground\n  ],\n  parts: {\n    a: {name:\"lumped\",t:\"serial\",s:4,r:  0.00,l:1.593,c:0.637},\n    b: {name:\"lumped\",t:\"serial\",s:4,r: 50.00,l:1.593,c:0.637},\n    c: {name:\"lumped\",t:\"serial\",s:4,r:100.00,l:1.593,c:0.637},\n    d: {name:\"lumped\",t:\"serial\",s:4,r:  5.00,l:2,c:1},\n    e: {name:\"lumped\",t:\"serial\",s:4,r: 11.11,l:1.59,c:.637},\n    f: {},\n    g: {},\n    h: {},\n    i: {name:\"tline\",z:50,phi:45},\n    // Terminazioni\n    o: {name:\"open\"},\n    s: {name:\"ground\"},\n    // Parti necessarie per la connessione\n    j2: {name:\"junction\",p:2},\n    j3: {name:\"tee\"},\n    j4: {name:\"cross\"},\n  },\n  board: {\n    zd: 50,\n    fd: 5,\n    er: 10.2,\n    h: 1.27,\n    s: 25.4,\n    c:  0\n  },\n  data:{\n    plot: {\n      f0: 0,\n      f1: 10,\n      r: 1,\n      np: 101\n    }\n  }\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App.js'\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}