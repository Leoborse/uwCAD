(this.webpackJsonpmWCAD=this.webpackJsonpmWCAD||[]).push([[0],{14:function(e,t,a){e.exports=a(21)},19:function(e,t,a){},20:function(e,t,a){},21:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(13),i=a.n(l),s=a(9),c=a(1),o=a(2),u=a(6),m=a(4),d=a(3),h=a(11),v=a(5),f=a.n(v);function p(e,t){return e.toLocaleString(void 0,{minimumFractionDigits:t,maximumFractionDigits:t})}var w=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).showModal=function(e){n.setState({show:e||0})},n.hideModal=function(){n.setState({show:-1})},n.setData=function(e){e.preventDefault();for(var t={},a=0;a<e.target.length;a++)if("BUTTON"!==e.target[a].tagName)if("number"===e.target[a].type){var r=parseFloat(e.target[a].value);isNaN(r)||(t[e.target[a].name]=r)}else t[e.target[a].name]=e.target[a].value;n.onChangeData(t),n.hideModal()},n.fmt=function(e,t){return p(e,t)},n.db=function(e){return p(20*Math.log10(e),2)},n.deg=function(e){return p(180*e/Math.PI,1)},n.state={show:-1},n.focus=null,n.onChangeData=n.props.onChangeData,n}return a}(r.a.Component),g=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={handleOk:n.props.handleOk,handleCancel:n.props.handleCancel,title:n.props.title,children:n.props.children},n}return Object(o.a)(a,[{key:"render",value:function(){var e=this.state,t=this.props.show?"w3-modal w3-show":"w3-modal w3-hide";return r.a.createElement("div",{className:t},r.a.createElement("div",{className:"w3-modal-content w3-animate-zoom w3-blue w3-round-large"},r.a.createElement("form",{onSubmit:e.handleOk},r.a.createElement("header",{className:"w3-container w3-round-large"},r.a.createElement("span",{className:"w3-xxlarge"},e.title),r.a.createElement("span",{className:"w3-button w3-right w3-round w3-xxlarge",onClick:this.state.handleCancel},"\xd7")),r.a.createElement("div",{className:"w3-container"},r.a.createElement("div",{className:"w3-margin"},e.children)),r.a.createElement("footer",{className:"w3-container w3-round-large"},r.a.createElement("button",{type:"submit",name:"submit",className:"w3-button w3-right w3-margin w3-round w3-green"},"Ok"),r.a.createElement("button",{type:"button",name:"cancel",className:"w3-button w3-right w3-margin w3-round w3-red",onClick:this.state.handleCancel},"Cancel")))))}}]),a}(r.a.Component),b=1e9,E=.001,y=1e-9,O=1e-12,k=b;function N(e){for(var t=["S11","S12","S21","S22"],a=e.data.plot.np,n=a+1-a%2,r=[],l=0;l<4;l++)r.push({name:t[l],value:[]});for(var i=function(e){for(var t=JSON.parse(JSON.stringify(e.layout)),a=function(e){var t,a,n=[];for(t=0;t<e.length;t++)for(a=0;a<e[t].n.length;a++){var r=e[t].n[a];n[r]=n[r]?n[r]+1:1}return n}(t),n=a.length,r=0;r<a.length;r++){switch(a[r]){case void 0:case 2:break;case 1:t.push({e:"o",n:[r]});break;default:for(var l=[],i=0;i<a[r];i++)l.push(n++);t.push({e:"j"+i,n:l}),t=j(t,r,l)}}var s=function(e){for(var t=0;t<e.length;t++)if("p"===e[t].e)return e[t].n}(t);for(r=0;r<s.length;r++)t=j(t,s[r],[r,r]);return t}(e),s=e.data.plot.f0*k,c=e.data.plot.f1*k,o=0;o<n;o++)for(var u=C(((n-1-o)*s+o*c)/(n-1),i,e),m=0,d=0;d<2;d++)for(var h=0;h<2;h++)r[m++].value.push(u[d][h]);return r}function j(e,t,a){for(var n=0,r=0;r<e.length;r++)for(var l=0;l<e[r].n.length;l++)e[r].n[l]===t&&(e[r].n[l]=a[n++]);return e}function C(e,t,a){var n=JSON.parse(JSON.stringify(t));for(n.forEach((function(t,r){"p"!==t.e&&(n[r].s=a.parts[t.e].smatrix(e,a.board))}));n.length>2;)for(var r=n.pop(),l=Math.max.apply(Math,Object(h.a)(r.n)),i=1;i<n.length;i++)if(n[i].n.includes(l)){var s=n[i],c={e:[r.e,s.e].join("-"),n:[].concat(Object(h.a)(r.n),Object(h.a)(s.n)).filter((function(e){return e!==this}),l),s:F(r,s,l)};n[i]=c,i=n.length}var o=n[1].n.indexOf(n[0].n[0]),u=n[1].n.indexOf(n[0].n[1]);return[[n[1].s[o][o],n[1].s[o][u]],[n[1].s[u][o],n[1].s[u][u]]]}function F(e,t,a){var n,r,l,i,s,c,o=e.s.length+t.s.length,u=new x(o-2,o-2),m=new x(o-2,2),d=new x(2,o-2),h=new x(2,2),v=new x([[new f.a(0),new f.a(1)],[new f.a(1),new f.a(0)]]);c=0,s=0,l=0;for(var p=[t,e];p.length>0;){var w=p.pop(),g=w.s.length,b=w.n.indexOf(a);for(n=0;n<g;n++)for(i=s,r=0;r<g;r++)n!==b?r!==b?u.set(n+l,r+i,w.s[n][r]):(i=s-1,m.set(n+l,c,w.s[n][r])):(l=s-1,r!==b?d.set(c,r+i,w.s[n][r]):(i=s-1,h.set(c,c,w.s[n][r])));l=s+=w.s.length-1,c+=1}return u.add(m.mul(v.sub(h).inverse().mul(d))).val()}var x=function(){function e(t,a,n){if(Object(c.a)(this,e),"undefined"===typeof a)this.s=t;else{n=n||new f.a(0),this.s=[];for(var r=0;r<t;r++){for(var l=[],i=0;i<a;i++)l.push(new f.a(n));this.s.push(l)}}}return Object(o.a)(e,[{key:"set",value:function(e,t,a){this.s[e][t]=a}},{key:"val",value:function(){return this.s}},{key:"add",value:function(e){for(var t=this.s,a=e.val(),n=t.length,r=t[0].length,l=new Array(n).fill(0),i=0;i<t.length;i++){l[i]=new Array(r).fill(0);for(var s=0;s<t[i].length;s++)l[i][s]=t[i][s].add(a[i][s])}return new this.constructor(l)}},{key:"sub",value:function(e){for(var t=this.s,a=e.val(),n=t.length,r=t[0].length,l=new Array(n).fill(0),i=0;i<t.length;i++){l[i]=new Array(r).fill(0);for(var s=0;s<t[i].length;s++)l[i][s]=t[i][s].sub(a[i][s])}return new this.constructor(l)}},{key:"mul",value:function(e){for(var t=this.s,a=e.val(),n=t.length,r=t[0].length,l=a[0].length,i=new Array(n).fill(0),s=0;s<n;s++){i[s]=new Array(l).fill(0);for(var c=0;c<l;c++){i[s][c]=t[s][0].mul(a[0][c]);for(var o=1;o<r;o++)i[s][c]=i[s][c].add(new f.a(t[s][o]).mul(a[o][c]))}}return new this.constructor(i)}},{key:"inverse",value:function(){var e=this.s,t=e[0][0].mul(e[1][1]).sub(e[0][1].mul(e[1][0])).inverse(),a=[[e[1][1].mul(t),e[0][1].mul(t).mul(-1)],[e[1][0].mul(t).mul(-1),e[0][0].mul(t)]];return new this.constructor(a)}},{key:"toString",value:function(){for(var t=this.s.length,a=this.s[0].length,n=new e(t,a,""),r=0;r<t;r++)for(var l=0;l<a;l++){var i=this.s[r][l],s="("+this.format(i.re,3)+","+this.format(i.im,3)+")";n.set(r,l,s)}return n}},{key:"format",value:function(e,t){return e.toLocaleString(void 0,{minimumFractionDigits:t,maximumFractionDigits:t})}}]),e}(),S=a(10),D=function(){function e(){Object(c.a)(this,e)}return Object(o.a)(e,[{key:"toString",value:function(){return this.data.name}},{key:"getData",value:function(){return this.data}},{key:"smatrix",value:function(){return[[new f.a(0)]]}},{key:"size",value:function(){return{l:1,w:1}}},{key:"elements",value:function(){var e=[];return Object.entries(P).forEach((function(t){var a=Object(s.a)(t,2),n=a[0],r=a[1];r.n=n,e.push(r)})),e}},{key:"render",value:function(){return r.a.createElement("div",{className:"w3-container w3-large w3-center w3-padding"},"No parametres to define")}}]),e}(),M=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this)).data="undefined"!==typeof e?e:{name:""},P[n.data.name]?Object(S.a)(n,new P[n.data.name].v(e)):n}return a}(D),T=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this)).data=e,n.data.l=0,n.data.w=0,n}return Object(o.a)(a,[{key:"toString",value:function(){return["\xb5 strip","Z=",this.data.z+"\u03a9,","L=",this.data.phi+"\xb0"].join(" ")}},{key:"size",value:function(){return{l:this.l,w:this.w}}},{key:"smatrix",value:function(e,t){var a=this.data.z/t.zd,n=1/a,r=t.er,l=.5*(r+1+(r-1)/Math.sqr(11)),i=2*Math.PI*e*b*Math.sqrt(l)/3e8,s=Math.exp(+i*this.data.l*E),c=Math.exp(-i*this.data.l*E),o=s+c+.5*(a+n)*(s-c),u=new f.a(.5*(a-n)*(s-c)/o),m=new f.a(2/o);return[[u,m],[m,u]]}},{key:"render",value:function(){return r.a.createElement("div",{className:"w3-container"},r.a.createElement("div",{className:"w3-row"},r.a.createElement("div",{className:"w3-col w3-padding s12 m3 l3"},r.a.createElement("label",null,"Imp. (\u03a9)"),r.a.createElement("input",{className:"w3-input w3-round-large",type:"number",name:"z",defaultValue:this.data.z})),r.a.createElement("div",{className:"w3-col w3-padding s12 m3 l3"},r.a.createElement("label",null,"Phase (\xb0)"),r.a.createElement("input",{className:"w3-input w3-round-large",type:"number",name:"phi",defaultValue:this.data.phi})),r.a.createElement("div",{className:"w3-col w3-padding s12 m3 l3"},r.a.createElement("label",null,"Len. (mm)"),r.a.createElement("input",{className:"w3-input w3-round-large",type:"number",name:"l",defaultValue:this.data.l})),r.a.createElement("div",{className:"w3-col w3-padding s12 m3 l3"},r.a.createElement("label",null,"Wid. (mm)"),r.a.createElement("input",{className:"w3-input w3-round-large",type:"number",name:"w",defaultValue:this.data.w}))))}}]),a}(D),P={lumped:{v:function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this)).data=e,n.data.t="undefined"!=typeof e.t?e.t:"serial",n.data.s="undefined"!=typeof e.s?e.s:4,n}return Object(o.a)(a,[{key:"toString",value:function(){var e="serial"===this.data.t?"+":"||",t=[this.data.r+"\u03a9"];"undefined"!=typeof this.data.l&&t.push(this.data.l+"nH"),"undefined"!=typeof this.data.c&&t.push(this.data.c+"pF");var a=t.join(e);return[this.data.name,a,this.data.s+"mm"].join(" ")}},{key:"size",value:function(){return{l:this.data.s,w:.5*this.data.s}}},{key:"smatrix",value:function(e,t){var a,n,r,l=2*Math.PI*e,i=this.data.r,s=this.data.l*y,c=this.data.c*O;"serial"===this.data.t?(n=l*(s||0),r=c?1/(l*c):0,a=new f.a([i,n-r])):(n=s?1/(l*s):0,r=l*(c||0),a=new f.a([1/i,-n+r]).inverse()),a=a.div(t.zd);var o=new f.a(a).add(2).inverse(),u=new f.a(a).mul(o),m=new f.a(2).mul(o);return[[u,m],[m,u]]}},{key:"render",value:function(){return r.a.createElement("div",{className:"w3-container"},r.a.createElement("div",{className:"w3-row"},r.a.createElement("div",{className:"w3-col w3-padding s12 m4 l3"},r.a.createElement("label",null,"Connection type"),r.a.createElement("select",{className:"w3-select w3-round-large",defaultValue:this.data.t,name:"t",title:"Connection type"},r.a.createElement("option",{value:"serial"},"Series"),r.a.createElement("option",{value:"parallel"},"Parallel")))),r.a.createElement("div",{className:"w3-row"},r.a.createElement("div",{className:"w3-col w3-padding s12 m3 l3"},r.a.createElement("label",null,"Res. (\u03a9)"),r.a.createElement("input",{className:"w3-input w3-round-large",name:"r",defaultValue:this.data.r,type:"number",step:".001",required:!0})),r.a.createElement("div",{className:"w3-col w3-padding s12 m3 l3"},r.a.createElement("label",null,"Ind. (nH)"),r.a.createElement("input",{className:"w3-input w3-round-large",name:"l",defaultValue:this.data.l,type:"number",step:".001"})),r.a.createElement("div",{className:"w3-col w3-padding s12 m3 l3"},r.a.createElement("label",null,"Cap. (pF)"),r.a.createElement("input",{className:"w3-input w3-round-large",name:"c",defaultValue:this.data.c,type:"number",step:".001"})),r.a.createElement("div",{className:"w3-col w3-padding s12 m3 l3"},r.a.createElement("label",null,"Len. (mm)"),r.a.createElement("input",{className:"w3-input w3-round-large",name:"s",defaultValue:this.data.s,type:"number",step:".001",required:!0}))))}}]),a}(D),d:"Lumped element"},tline:{v:T,d:"Microstrip transmission line"},junction:{v:function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).data=e,n.data.p="number"===typeof e.p?e.p:2,n}return Object(o.a)(a,[{key:"toString",value:function(){return[this.name,this.p,"ports"].join(" ")}},{key:"smatrix",value:function(){for(var e=this.data.p,t=[],a=0;a<e;a++){t[a]=[];for(var n=0;n<e;n++)t[a][n]=a===n?new f.a((2-e)/e):new f.a(2/e)}return t}}]),a}(D),d:"Multiport junction"},tee:{v:function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"smatrix",value:function(){var e=new f.a(-1/3),t=new f.a(2/3);return[[e,t,t],[t,e,t],[t,t,e]]}}]),a}(D),d:"Tee junction"},cross:{v:function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"smatrix",value:function(){var e=new f.a(-.5),t=new f.a(.5);return[[e,t,t,t],[t,e,t,t],[t,t,e,t],[t,t,t,e]]}}]),a}(D),d:"Cross junction"},open:{v:function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"smatrix",value:function(e){return[[new f.a(1)]]}},{key:"size",value:function(){return{l:0,w:0}}}]),a}(D),d:"Open circuit"},ground:{v:function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"smatrix",value:function(e){return[[new f.a(-1)]]}},{key:"size",value:function(){return{l:1,w:1}}}]),a}(D),d:"Short to ground"}},z=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){var e=this,t=this.props.conf.colors,a=this.props.value,n=this.props.data,l=this.props.board,i=n.plot.np,s=(i-1)*(l.fd-n.plot.f0)/(n.plot.f1-n.plot.f0);s=Math.max(Math.min(Math.floor(s),i-1),0);var c=n.plot.f0+s*(n.plot.f1-n.plot.f0)/(i-1);return r.a.createElement("div",{className:"w3-card-4 w3-margin-bottom w3-border w3-border-green w3-topbar"},r.a.createElement(g,{title:"Number of data points",show:0===this.state.show,handleOk:this.setData,handleCancel:this.hideModal},r.a.createElement("div",{className:"w3-center"},r.a.createElement("input",{className:"w3-input",name:"data.plot.np",defaultValue:i,type:"number",min:"5",max:"10001",step:"2",required:!0}))),r.a.createElement("div",{className:"w3-center"},r.a.createElement("sup",{className:"w3-black w3-large w3-padding"},a)),r.a.createElement("div",{className:"w3-margin-left w3-margin-right",onClick:function(t){return e.showModal(0)}},"Points ",i),r.a.createElement("div",{className:"w3-margin-left w3-margin-right"},"Smith radius ",r.a.createElement("span",{className:"w3-text-green"},this.fmt(n.plot.r,2))),r.a.createElement("div",{className:"w3-margin-left w3-margin-right"},r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null),r.a.createElement("td",null,"f"),r.a.createElement("td",{className:"w3-text-green"},this.fmt(c,3)),r.a.createElement("td",null,"GHz"),r.a.createElement("td",null),r.a.createElement("td",null)),n.curve.map((function(a,n){return r.a.createElement("tr",{key:n},r.a.createElement("td",{style:{color:t[n]}},"x"),r.a.createElement("td",null,a.name),r.a.createElement("td",{className:"w3-text-green w3-right"},e.db(a.value[s].abs())),r.a.createElement("td",null,"dB"),r.a.createElement("td",{className:"w3-text-green w3-right"},e.deg(a.value[s].arg())),r.a.createElement("td",null,"\xb0"))}))))))}}]),a}(w),A=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){var e=this.props.value,t=this.props.info;return r.a.createElement("div",{className:"w3-card-4 w3-margin-bottom w3-border w3-border-red w3-topbar"},r.a.createElement("div",{className:"w3-center"},r.a.createElement("sup",{className:"w3-black w3-large w3-padding"},e)),r.a.createElement("div",{className:"w3-margin-left w3-margin-right"},r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"l:"),r.a.createElement("td",null,t.l),r.a.createElement("td",null,"mm")),r.a.createElement("tr",null,r.a.createElement("td",null,"w:"),r.a.createElement("td",null,t.w),r.a.createElement("td",null,"mm"))))))}}]),a}(w),G=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;Object(c.a)(this,a),(n=t.call(this,e)).onChangeData=n.props.onChangeData,n.value=n.props.value;var r=n.props.parts;return n.state.modals=[{n:"a",v:r.a},{n:"b",v:r.b},{n:"c",v:r.c},{n:"d",v:r.d},{n:"e",v:r.e},{n:"f",v:r.f},{n:"g",v:r.g},{n:"h",v:r.h},{n:"i",v:r.i}],n.state.current={n:"x",v:new M},n.handleChange=n.handleChange.bind(Object(u.a)(n)),n.editParams=n.editParams.bind(Object(u.a)(n)),n}return Object(o.a)(a,[{key:"checkData",value:function(e){e.preventDefault();for(var t=["parts",this.state.current.n].join("."),a=this.state.current.v.getData(),n=0;n<e.target.length;n++)if("BUTTON"!==e.target[n].tagName)if("number"===e.target[n].type){var r=parseFloat(e.target[n].value);isNaN(r)||(a[e.target[n].name]=r)}else a[e.target[n].name]=e.target[n].value;var l={};l[t]=new M(a),console.log(l),this.onChangeData(l),this.hideModal()}},{key:"handleChange",value:function(e){console.log(this.state.current);var t=this.state.current;t.name=e.target.value,t.v=new M({name:t.name}),t.i=1-t.i,this.setState({current:t}),console.log(this.state.current)}},{key:"editParams",value:function(e){var t=this.state.modals[e],a=this.state.current;a.i=a.n=t.n,a.v=new M(t.v.getData()),a.name=t.v.name,this.setState({current:a}),this.showModal()}},{key:"render",value:function(){var e=this,t=this.value,a=this.state.modals,n=this.state.current,l=this.state.step;return r.a.createElement("div",{key:l,className:"w3-card-4 w3-margin-bottom w3-border w3-border-yellow w3-topbar"},r.a.createElement(g,{key:n.i,title:"Circuit element",show:0===this.state.show,handleCancel:this.hideModal,handleOk:function(t){return e.checkData(t)}},r.a.createElement("div",null,r.a.createElement("label",{className:"w3-large",htmlFor:n.i},"Part: ",n.n),r.a.createElement("select",{id:n.i,className:"w3-select w3-round-large",value:n.v.getData().name,onChange:this.handleChange,name:"name",title:"Circhuit element type"},r.a.createElement("option",{value:""},"Chose an element"),n.v.elements().map((function(e,t){return r.a.createElement("option",{key:t,value:e.n},e.d)}))),n.v.render())),r.a.createElement("div",{className:"w3-center"},r.a.createElement("sup",{className:"w3-black w3-large w3-padding"},t)),r.a.createElement("div",{className:"w3-margin-left w3-margin-right"},r.a.createElement("table",null,r.a.createElement("tbody",null,a.map((function(t,a){return r.a.createElement("tr",{key:a,onClick:function(){return e.editParams(a)}},r.a.createElement("td",null,t.n),r.a.createElement("td",null,t.v.toString()))}))))))}}]),a}(w),I=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){var e=this,t=this.props.value,a=this.props.board,n=[{n:"board.zd",v:a.zd,u:"\u03a9",title:"Impedance"},{n:"board.fd",v:a.fd,u:"GHz",title:"Frequency"},{n:"board.er",v:a.er,u:"",title:"Costante dielettrica"},{n:"board.h",v:a.h,u:"mm",title:"Spessore"},{n:"board.s",v:a.s,u:"mm",title:"s"},{n:"board.c",v:a.c,u:"mm",title:"c"}];return r.a.createElement("div",{className:"w3-card-4 w3-margin-bottom w3-border w3-border-blue w3-topbar"},n.map((function(t,a){return r.a.createElement(g,{key:a,title:[t.title,t.u].join(" - "),show:e.state.show===a,handleCancel:e.hideModal,handleOk:function(a){return e.setData(a,t.n)}},r.a.createElement("div",{className:"w3-center"},r.a.createElement("input",{ref:function(e){return e&&e.focus()},className:"w3-input",name:t.n,defaultValue:t.v,type:"number",step:".001"})))})),r.a.createElement("div",{className:"w3-center"},r.a.createElement("sup",{className:"w3-black w3-large w3-padding"},t)),r.a.createElement("div",{className:"w3-margin-left w3-margin-right"},r.a.createElement("table",null,r.a.createElement("tbody",null,n.map((function(t,a){return r.a.createElement("tr",{key:a,onClick:function(t){return e.showModal(a)}},r.a.createElement("td",null,t.n.split(".").pop()),r.a.createElement("td",{className:"w3-right"},e.fmt(t.v,3)),r.a.createElement("td",null,t.u))}))))))}}]),a}(w),L=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).setCanvas=function(e){n.canvas=e},n.canvas=null,n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.drawGraph()}},{key:"componentDidUpdate",value:function(){this.drawGraph()}},{key:"drawGraph",value:function(){var e=this.props.parts,t=this.props.layout,a=this.props.board,n=this.canvas,r=n.getBoundingClientRect();n.width=r.width,n.height=n.width;var l=n.getContext("2d");n.height=n.width;var i=n.width-40,s=n.height-40;l.beginPath(),l.font="24px serif",l.strokeStyle="#FFFFFF",l.strokeRect(20,0,i,s),l.fillStyle="#FF0000";l.fillText("1",4,.5*s+4),l.fillRect(16,.5*s-4,8,8),l.fillText("2",20+i+8,.5*s+4),l.fillRect(20+i-4,.5*s-4,8,8),l.stroke();var c=i/a.s,o=.5*a.s,u=.5*a.s,m=[[o,u]];t.forEach((function(a,n){if(-1==="op".indexOf(a.e)){t[n].dim=e[a.e]?e[a.e].size():{l:0,w:0};var r=a.n;if(m[r[0]]=m[r[0]]||[o+5*n,u+5*n],l.beginPath(),l.fillStyle="#FFFF00",l.arc(m[r[0]][0]*c,m[r[0]][1]*c,2,0,2*Math.PI),l.fill(),r[1]){if(-1!=="ns".indexOf(a.d)){var i=t[n].dim.w;t[n].dim.w=t[n].dim.l,t[n].dim.l=i,-1!=="s".indexOf(a.d)?m[r[1]]=[m[r[0]][0],m[r[0]][1]+t[n].dim.w]:m[r[1]]=[m[r[0]][0],m[r[0]][1]-t[n].dim.w]}else-1!=="e".indexOf(a.d)?m[r[1]]=[m[r[0]][0]+t[n].dim.l,m[r[0]][1]]:m[r[1]]=[m[r[0]][0]-t[n].dim.l,m[r[0]][1]];l.beginPath(),l.fillStyle="#FFFF00",l.arc(m[r[1]][0]*c,m[r[1]][1]*c,2,0,2*Math.PI),l.fill()}}})),l.beginPath(),l.font="16px serif",l.textAlign="center",l.textBaseline="middle",l.fillStyle="#FFFF00",l.strokeStyle="#00FFFF",t.forEach((function(e,t){if(-1==="op".indexOf(e.e)){var a=e.n[0],n=m[a][0]*c,r=m[a][1]*c,i=e.dim.l*c,s=e.dim.w*c;"e"===e.d?(l.rect(n,r-.5*s,i,s),l.fillText(e.e,n+.5*i,r)):"w"===e.d?(l.rect(n,r-.5*s,-i,s),l.fillText(e.e,n-.5*i,r)):"n"===e.d?(l.rect(n-.5*i,r,i,-s),l.fillText(e.e,n,r-.5*s)):"s"===e.d?(l.rect(n-.5*i,r,i,s),l.fillText(e.e,n,r+.5*s)):l.rect(n-.5*i,r-.5*s,i,s)}})),l.stroke(),t.forEach((function(e,t){if(-1!=="p".indexOf(e.e)){var a=e.n;l.beginPath(),l.lineWidth=5,l.fillStyle="#FFFF00",l.strokeStyle="#00FF00",l.moveTo(20,.5*s),l.lineTo(m[a[0]][0]*c,m[a[0]][1]*c),l.moveTo(20+i,.5*s),l.lineTo(m[a[1]][0]*c,m[a[1]][1]*c),l.stroke()}}))}},{key:"render",value:function(){var e=this.props.value;return r.a.createElement("div",{className:"w3-card-4 w3-margin-bottom w3-margin-left w3-border w3-border-cyan w3-topbar"},r.a.createElement("div",{className:"w3-center"},r.a.createElement("sup",{className:"w3-black w3-large w3-padding"},e)),r.a.createElement("div",null,r.a.createElement("canvas",{ref:this.setCanvas})))}}]),a}(w),V=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).setCanvas=function(e){n.canvas=e},n.canvas=null,n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.drawGraph()}},{key:"componentDidUpdate",value:function(){this.drawGraph()}},{key:"drawGraph",value:function(){var e=this.props.data,t=this.props.conf,a=this.canvas,n=a.getBoundingClientRect();a.width=n.width,a.height=a.width;var r,l,i,s,c,o=a.getContext("2d"),u=a.width,m=.5*u,d=m,h=m,v=2*Math.PI;for(o.width=u,o.height=u,o.beginPath(),o.strokeStyle="#003F00",r=1;r<10;r++)c=m*(1/(1+(i=r/10))),s=m*(1/i),o.arc(u-c,h,c,0,v),o.arc(u,h-s,s,0,v),o.arc(u,h+s,s,0,v),c=m*(1/(1+(i=10-r))),s=m*(1/i),o.arc(u-c,h,c,0,v),o.arc(u,h-s,s,0,v),o.arc(u,h+s,s,0,v);for(o.stroke(),o.beginPath(),o.strokeStyle="#00AF00",o.moveTo(0,m),o.lineTo(u,m),c=m*(1/(1+(i=0))),o.arc(u-c,h,c,0,v),c=m*(1/(1+(i=1))),s=m*(1/i),o.arc(u-c,h,c,0,v),o.arc(u,h-s,s,0,v),o.arc(u,h+s,s,0,v),o.stroke(),l=0;l<e.curve.length;l++){o.beginPath(),o.strokeStyle=t.colors[l],o.setLineDash([]);var f=e.curve[l].value;for(r=0;r<f.length;r++){var p=d+m*f[r].re,w=h-m*f[r].im;0===r?o.moveTo(p,w):o.lineTo(p,w)}o.stroke()}}},{key:"render",value:function(){var e=this.props.value;return r.a.createElement("div",{className:"area w3-card-4 w3-margin-bottom w3-margin-left w3-border w3-border-black w3-topbar"},r.a.createElement("div",{className:"w3-center"},r.a.createElement("sup",{className:"w3-black w3-large w3-padding"},e)),r.a.createElement("div",null,r.a.createElement("canvas",{ref:this.setCanvas})))}}]),a}(w),B=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).setCanvas=function(e){n.canvas=e},n.canvas=null,n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.drawGraph()}},{key:"componentDidUpdate",value:function(){this.drawGraph()}},{key:"drawGraph",value:function(){var e=this.props.data,t=this.props.conf,a=this.canvas,n=a.getBoundingClientRect();a.width=n.width,a.height=n.height;var r=a.getContext("2d");r.font="12px serif";var l,i,s,c,o=a.width-48,u=a.height-24,m=Math.ceil(20*Math.log10(e.plot.r)),d=[m-t.range,m];for(r.beginPath(),r.strokeStyle="#007F00",r.setLineDash([]),r.rect(24,0,o,u),r.stroke(),r.beginPath(),r.strokeStyle="#007F00",r.setLineDash([8,2]),s=o/10,l=1;l<10;l++)r.moveTo(24+s*l,0),r.lineTo(24+s*l,u);for(var h=10*Math.floor(m/10);(c=u*(d[1]-h)/(d[1]-d[0]))<u;)r.moveTo(24,c),r.lineTo(24+o,c),h-=10;for(r.stroke(),i=0;i<e.curve.length;i++){r.beginPath(),r.strokeStyle=t.colors[i],r.setLineDash([]);var v=e.curve[i].value;for(s=o/(v.length-1),l=0;l<v.length;l++){var f=20*Math.log10(v[l].abs());c=Math.min(u,u*(d[1]-f)/(d[1]-d[0])),0===l?r.moveTo(24+s*l,c):r.lineTo(24+s*l,c)}r.stroke()}}},{key:"render",value:function(){var e=this,t=this.props.value,a=this.props.data,n=this.props.conf,l=a.plot.f0,i=a.plot.f1,s=.5*(l+i),c=[{n:"data.plot.f0",v:a.plot.f0,u:"GHz",title:"Frequenza minima"},{n:"data.plot.f1",v:a.plot.f1,u:"GHz",title:"Frequenza massima"}];return r.a.createElement("div",{className:"area w3-card-4 w3-margin-bottom w3-margin-left w3-border w3-border-black w3-topbar"},c.map((function(t,a){return r.a.createElement(g,{key:a,title:[t.title,t.u].join(" - "),show:e.state.show===a,handleCancel:e.hideModal,handleOk:e.setData},r.a.createElement("div",{className:"w3-center"},r.a.createElement("input",{ref:function(e){return e&&e.focus()},className:"w3-input",name:t.n,defaultValue:t.v,type:"number",step:".01"})))})),r.a.createElement("div",{className:"w3-center"},r.a.createElement("sup",{className:"w3-black w3-large w3-padding"},t)),r.a.createElement("div",{className:"w3-display-container w3-text-white"},r.a.createElement("span",{className:"w3-display-topright w3-text-green"},Math.ceil(20*Math.log10(a.plot.r))),r.a.createElement("span",{className:"w3-display-right w3-margin-bottom"},"|S|",r.a.createElement("br",null),"dB"),r.a.createElement("span",{className:"w3-display-bottomright w3-margin-bottom w3-text-green"},Math.ceil(20*Math.log10(a.plot.r))-n.range),r.a.createElement("span",{className:"w3-display-bottomleft  w3-margin-left",onClick:function(t){return e.showModal(0)}},this.fmt(l,2)),r.a.createElement("span",{className:"w3-display-bottommiddle w3-text-green"},this.fmt(s,3)," GHz"),r.a.createElement("span",{className:"w3-display-bottomright w3-margin-right",onClick:function(t){return e.showModal(1)}},this.fmt(i,2)),r.a.createElement("canvas",{ref:this.setCanvas})))}}]),a}(w),q=(a(19),a(20),function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;Object(c.a)(this,a),n=t.call(this,e);var r=R;localStorage.setItem("uwCAD",JSON.stringify(r)),n.state=r;for(var l=0,i=Object.entries(r.parts);l<i.length;l++){var o=Object(s.a)(i[l],2),m=o[0],d=o[1];n.state.parts[m]=new M(d)}return n.state.step=0,n.state.data.curve=N(n.state),n.state.cache={name:"Unknown cache name"},n.onChangeData=n.onChangeData.bind(Object(u.a)(n)),n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;console.log("/cache.infos"),fetch("/cache.infos").then((function(e){return e.json()})).then((function(t){console.log(t),e.setState({cache:t}),e.setState({step:1-e.state.step})}))}},{key:"onChangeData",value:function(e){var t=this.state,a=t.step;for(var n in console.log("updating values"),e){console.log(n,e[n]);for(var r=t,l=n.split(".");1!==l.length;)r=r[l.shift()];r[l[0]]=e[n]}console.log(t.parts),delete t.data.curve,delete t.step,localStorage.setItem("uwCAD",JSON.stringify(t)),t.data.curve=N(t),t.step=a+1,this.setState(t)}},{key:"render",value:function(){return r.a.createElement("div",{key:this.state.step,className:"w3-margin"},r.a.createElement("div",null,this.state.cache.name),r.a.createElement("div",{className:"w3-row"},r.a.createElement("div",{className:"w3-col m5 l4"},r.a.createElement(z,{value:"F2 : PLOT",data:this.state.data,conf:this.state.conf,board:this.state.board,onChangeData:this.onChangeData}),r.a.createElement(A,{value:"INFO",info:this.state.info}),r.a.createElement(G,{value:"F3 : PARTS",parts:this.state.parts,onChangeData:this.onChangeData}),r.a.createElement(I,{value:"F4 : BOARD",board:this.state.board,onChangeData:this.onChangeData})),r.a.createElement("div",{className:"w3-col m7 l8"},r.a.createElement("div",{className:"w3-row"},r.a.createElement("div",{className:"w3-col m6 l6"},r.a.createElement(L,{value:"F1 : LAYOUT",parts:this.state.parts,layout:this.state.layout,board:this.state.board})),r.a.createElement("div",{className:"w3-col m6 l6"},r.a.createElement(V,{value:"Smith chart",data:this.state.data,conf:this.state.conf}))),r.a.createElement("div",{className:"w3-row"},r.a.createElement("div",{className:"w3-col m12 l12"},r.a.createElement(B,{value:"|S| vs Frequency",data:this.state.data,conf:this.state.conf,onChangeData:this.onChangeData}))))))}}]),a}(r.a.Component)),R={conf:{colors:["#FF0000","#00FFFF","#0000FF","#FFFF00"],range:40},info:{l:"? 2.916 ?",w:"? 0.649 ?"},lay_out:[{e:"p",n:[0,1]},{e:"i",n:[0,1],d:"e"}],layout:[{e:"p",n:[0,1]},{e:"a",n:[0,2],d:"e"},{e:"b",n:[2,1],d:"e"},{e:"c",n:[2,3],d:"s"},{e:"s",n:[3],d:"c"}],parts:{a:{name:"lumped",t:"serial",s:4,r:0,l:1.593,c:.637},b:{name:"lumped",t:"serial",s:4,r:50,l:1.593,c:.637},c:{name:"lumped",t:"serial",s:4,r:100,l:1.593,c:.637},d:{name:"lumped",t:"serial",s:4,r:5,l:2,c:1},e:{name:"lumped",t:"serial",s:4,r:11.11,l:1.59,c:.637},f:{},g:{},h:{},i:{name:"tline",z:50,phi:45},o:{name:"open"},s:{name:"ground"},j2:{name:"junction",p:2},j3:{name:"tee"},j4:{name:"cross"}},board:{zd:50,fd:5,er:10.2,h:1.27,s:25.4,c:0},data:{plot:{f0:0,f1:10,r:1,np:101}}};i.a.render(r.a.createElement(q,null),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.7ac355c8.chunk.js.map